<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DiffWave GUI</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/meyda@5.4.0/dist/web/meyda.min.js"></script>
    <script src="https://unpkg.com/umap-js@1.4.0/lib/umap-js.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/numjs/0.16.0/numjs.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.7.1/jszip.min.js"></script>
</head>
<body>
    <div class="main-container">
        <h2>DiffWave GUI</h2>
        <div class="grid-container">

            <div class="grid-item full-width">
                <h3>‚öôÔ∏è WORK IN PROGRESS ‚öôÔ∏è</h3>
            </div>

            <div class="grid-item full-width">
                <h3>‚òÅÔ∏è Upload Audio File ‚òÅÔ∏è</h3>
                <div id="dropArea" class="drop-area">
                    <p>Drop a WAV file || Click to select one</p>
                </div>
                <input type="file" id="audioFileInput" accept=".wav" style="display:none;">
                <div id="uploadStatus"></div>
            </div>

            <div class="grid-item">
                <h3>üî¨ Analyse Descriptors üî¨</h3>
                <form id="preprocessForm">
                    <div class="form-group descriptors" style="padding: 10px 0px;">
                        <label><input type="checkbox" id="loudness" name="options" value="loudness" checked>Loudness</label>
                        <label><input type="checkbox" id="pitch" name="options" value="pitch" checked>Pitch</label>
                        <label><input type="checkbox" id="mfcc" name="options" value="mfcc" checked>MFCC</label>
                        <label><input type="checkbox" id="chroma" name="options" value="chroma" checked>Chroma</label>
                        <label><input type="checkbox" id="centroid" name="options" value="centroid" checked>Centroid</label>
                        <label><input type="checkbox" id="contrast" name="options" value="contrast" checked>Contrast</label>
                        <label><input type="checkbox" id="bandwidth" name="options" value="bandwidth" checked>Bandwidth</label>
                        <label><input type="checkbox" id="rolloff" name="options" value="rolloff" checked>Rolloff</label>
                        <label><input type="checkbox" id="flatness" name="options" value="flatness" checked>Flatness</label>
                    </div>
                    <div class="form-group centered">
                        <label><input type="checkbox" id="umap" name="umap" value="UMAP" checked>UMAP</label>
                        <input type="number" id="umapDims" name="umap" value="5" min="1" max="20" style="width: 60px;">
                    </div>
                    <div class="form-group">
                        <label for="totalDims">Number of Dimensions:</label>
                        <input type="text" id="totalDims" name="totalDims" readonly>
                    </div>
                    <div class="form-group">
                        <button type="button" onclick="preprocess()">Analyse</button>
                        <button type="button" onclick="download()">Download Dataset</button>
                    </div>
                    <div id="analysisResults"></div>
                </form>
            </div>

            <div class="grid-item">
                <h3>üñ•Ô∏è Train Model üñ•Ô∏è</h3>
                <form id="connectForm">
                    <div class="form-group output-container">
                        <select id="osSelect" name="osSelect" onchange="updateTrain()">
                            <option value="Windows">Windows</option>
                            <option value="MacOS/Linux">MacOS/Linux</option>
                        </select>

                        <label for="trainOutput_01">Command 01:</label>
                        <textarea id="trainOutput_01"></textarea>
                        <button type="button" onclick="copyCommand('trainOutput_01')">Copy</button>
                        <label for="trainOutput_02">Command 02:</label>
                        <textarea id="trainOutput_02"></textarea>
                        <button type="button" onclick="copyCommand('trainOutput_02')">Copy</button>
                        <label for="trainOutput_03">Command 03:</label>
                        <textarea id="trainOutput_03"></textarea>
                        <button type="button" onclick="copyCommand('trainOutput_03')">Copy</button>
                    </div>
                </form>
            </div>

            <div class="grid-item">
                <h3>üñ•Ô∏è Get Model üñ•Ô∏è</h3>
                <form id="getModelForm">
                    <div class="form-container">
                        <div class="form-group">
                            <label for="getModelFolder">(Input) Model Folder:</label>
                            <input type="text" id="getModelFolder" name="getModelFolder">
                            <label for="getModelFullpath">(Output) Where to Copy:</label>
                            <input type="text" id="getModelFullpath" name="getModelFullpath">
                        </div>
                        <label for="getModelOutput">Command:</label>
                        <textarea id="getModelOutput"></textarea>
                        <button type="button" onclick="copyCommand('getModelOutput')">Copy</button>
                    </div>
                </form>
            </div>

            <div class="grid-item">
                <h3>üéµ Inference üéµ</h3>
                <form id="inferenceForm">
                    <div class="form-container">
                        <div class="form-group">
                            <label for="inferenceModelFolder">(Input) Model Folder:</label>
                            <input type="text" id="inferenceModelFolder" name="inferenceModelFolder" value="model-new">
                        </div>
                    </div>
                    <div class="form-group output-container">
                        <label for="inferenceOutput">Command:</label>
                        <textarea id="inferenceOutput"></textarea>
                        <button type="button" onclick="copyCommand('inferenceOutput')">Copy</button>
                    </div>
                </form>
            </div>

        </div>
    </div>
    <script src="script.js"></script>
</body>
</html>
